### DDIA读书笔记第7周第8章 分布式系统的麻烦

看到标题以为是将各种分布式协议，看了章节的内容才发现是将麻烦，也就是提出了各种问题，但是并没有讲具体的解决办法。

机器故障：单机没有不可靠因素，当硬件正常时，总是能得到预期结果；分布式系统会部分失效，部分失效是不确定性的，由于还涉及到网络的不确定性，有时甚至连结果都是不确定的。分布式系统必须容忍部分不可靠，建立容错机制保持整体的可靠。

网络的不可靠：分布式系统机器间必须通过网络连接，网络发送时无法保证到达时间以及是否达到。

故障检测：挂掉的机器需要移出系统，由于网络的不确定性使判断一个节点是否正常非常难。如果用超时来判断一个节点是否正常，超时应该等待多少也没有简单的答案。

时间同步：分布式节点之间时间同步是非常重要的，但是做到同步是很难的。系统是否超时、系统响应时间、业务执行时间、定时任务等这些都依赖时间。消息从一个节点到另一个节点有延迟，各个节点之间都有自己的时间。时钟指通常意义上的时钟，单调钟指从某个时间开始计时的时间。单调钟只能增加，不需要同步，时钟同步时会回退或者向前。

数据的一致性：数据由节点的多数决定。选定一个领导者。如果节点存在任意故障的风险，这种行为称为拜占庭故障；在不信任的故障中达成共识的问题称为拜占庭将军问题；当系统在部分节点故障、不遵守协议、故意攻击、扰乱时仍能正常工作，称之为拜占庭容错。