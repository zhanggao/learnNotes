### DDIA读书笔记第4章

本章章节名是编码与演化，我理解的就是讲几种序列化与反序列化的方式，通篇读下来感觉这短短的一个章节确设计到非常多的点，每个点都讲得很浅显，很多东西如果以前没有接触过，看这个根本就看不懂，如果以前接触过，那看下来感觉很多知识点对于开发人员来说都是理所当然的东西。

常见的方式有文本格式和二进制格式，文本格式常用的有JSON、XML、CSV等，二进制有Thrift、Protocol Buffers、Avro等。文本格式使用简单，可读性强，占用空间比较大，二进制基本没有可读性，占用空间小。

兼容性：向后兼容(新代码可以读旧数据)和向前兼容(旧代码可以读新数据)，向后兼容可以很容易实现，向前兼容旧代码忽略新增部分，一般不改结构。
编码：在内存中一般是保存对象，结构体、数组、列表、哈希、树等，如果需要传输或者持久化就必须编码成字节序列，如果将字节转成对象就需要将字节解码。
文本编码格式看起来就是简单的键值对数据，二进制是一种比较紧凑的格式，牺牲了可读性，换来了性能和存储空间。Protocol Buffers是一种比较典型的二进制格式，它编码后舍弃了字段名，使用序号代替，因此节省大量的空间，反序列化必须依赖代码里定义的结构体，代码里定义的结构体如果需要新增字段必须在后面增加，否则会影响新老代码的反序列化。
